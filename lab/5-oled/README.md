# Лабораторная работа 5. OLED-дисплей

## Цели работы

1. Изучить устройство и принципы работы дисплейного модуля в стенде SDK-1.1M.

2. Получить навыки программирования дисплейных устройств.

## Задание

Разработать программу, которая включает драйвер OLED-дисплея. Для организации обмена данными с дисплеем можно использовать те же три способа, что и в предыдущей работе. Поскольку дисплей управляется по той же шине I2C, что и клавиатура, необходимо избежать конфликтов доступа к шине. При работе с I2C по опросу они не возникнут, а при работе по прерыванию следует планировать вычисления так, чтобы транзакции не пересекались по времени.

Если транзакции I2C генерируются по прерыванию от таймера, следует встроить транзакции обновления видеопамяти дисплея в расписание опроса клавиатуры. При этом следует учесть, что отправка буфера данных в контроллер дисплея происходит значительно дольше, чем любая транзакция опроса клавиатуры. Например, после восьми вызовов обработчика прерываний для опроса клавиатуры можно инициировать отправку буфера и несколько вызовов обработчика отправлять никаких транзакций по I2C, давая время на завершение отправки буфера. Начальную инициализацию дисплея, как и клавиатуры, удобнее делать в режиме опроса, пока не включены прерывания от таймера.

## Порядок выполнения работы

### Изучить

- разделы учебного пособия: 1.8. Дисплейный модуль;

- подключение дисплейного модуля на схеме стенда SDK-1.1M;

- функциональность контроллера дисплея SSD1306BZ по документации;

- пример программы для работы с дисплеем.

### Подготовить шаблон проекта для STM32CubeIDE

### Разработать подсистему поддержки OLED-дисплея

### Разработать набор функций для реализации графических примитивов

### Разработать прикладную программу

### Оформить отчет

В котором привести краткое руководство пользователя для
разработанной программы: режимы работы, назначение кнопок, и т. п.

## Вариант 4

Адаптировать программу-калькулятор для использования с дисплеем и клавиатурой SDK-1.1M. Кнопки клавиатуры использовать для:

- ввода цифр 0 – 9;

- ввода операции: тип операции выбирается нажатием отдельной кнопки (одно нажатие – «+», два – «-», три – «*», четыре – «/», далее снова происходит переход к «+»), текущая выбранная операция запоминается при начале ввода второго операнда;

- окончания ввода и расчета ответа (эквивалент «=»).

На экране отображается три строки:

- первый операнд и знак операции;

- второй операнд и знак «=»;

- результат.

Пример:

```sh
xxxxx+
yyyyy=
zzzzz
```

При начале ввода первого операнда экран очищается от предыдущих данных.
